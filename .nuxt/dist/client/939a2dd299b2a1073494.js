(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1481:function(e,t,r){var content=r(1721);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(28).default)("63e920f7",content,!0,{sourceMap:!1})},1720:function(e,t,r){"use strict";var n=r(1481);r.n(n).a},1721:function(e,t,r){(t=r(27)(!1)).push([e.i,".ant-upload-select-picture-card i{font-size:32px;color:#777}.ant-upload-select-picture-card .ant-upload-text{margin-top:8px;color:#666}.btn-save{margin-top:15px}",""]),e.exports=t},1751:function(e,t,r){"use strict";r.r(t);r(101),r(71),r(38);var n=r(6),o=function(e,t,r,n){return new(r||(r=Promise))((function(o,l){function c(e){try{m(n.next(e))}catch(e){l(e)}}function d(e){try{m(n.throw(e))}catch(e){l(e)}}function m(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(c,d)}m((n=n.apply(e,t||[])).next())}))},l=function(e,body){var t,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(n=2&l[0]?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){o.label=l[1];break}if(6===l[0]&&o.label<n[1]){o.label=n[1],n=l;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(l);break}n[2]&&o.ops.pop(),o.trys.pop();continue}l=body.call(e,o)}catch(e){l=[6,e],r=0}finally{t=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},c=n.default.extend({name:"PageProfileSettings",layout:"admin",data:function(){return{form:this.$form.createForm(this),imgLoading:!1,avatar:""}},mounted:function(){return o(this,void 0,void 0,(function(){var e,code,data,t;return l(this,(function(r){switch(r.label){case 0:return[4,this.$axios.$get("/api/profile")];case 1:return e=r.sent(),code=e.code,data=e.data,1===code&&data.profile&&(t=data.profile,this.avatar=t.avatar,this.form.setFieldsValue({enName:t.enName,cnName:t.cnName,introduction:t.introduction,github:t.github,email:t.email})),[2]}}))}))},methods:{beforeUpload:function(e){var t=0===e.type.indexOf("image/"),r=e.size/1024/1024<2;return t?r||this.$message.error("图片体积不能大于2M！"):this.$message.error("只允许上传图片！"),t&&r},getBase64:function(img,e){var t=new FileReader;t.addEventListener("load",(function(){return e(t.result)})),t.readAsDataURL(img)},uploadChange:function(e){var t=this;"uploading"!==e.file.status?"done"===e.file.status&&this.getBase64(e.file.originFileObj,(function(e){t.avatar=e,t.imgLoading=!1})):this.imgLoading=!0},save:function(){var e=this;this.form.validateFieldsAndScroll((function(t,r){if(!t){var data=r;data.avatar=e.avatar,e.$axios.$put("/api/admin/profile",data).then((function(t){1===t.code?e.$message.success("保存成功！"):(console.error(t.message),e.$message.error("操作失败！"))}))}}))}}}),d=(r(1720),r(22)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-settings"},[r("div",{staticClass:"page-header"},[e._v("\n    关于管理\n  ")]),e._v(" "),r("div",{staticClass:"page-body"},[r("a-form",{attrs:{form:e.form,"self-update":!0}},[r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          头像\n        ")]),e._v(" "),r("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["avatar"],expression:"['avatar']"}],attrs:{name:"avatar","show-upload-list":!1,"list-type":"picture-card","before-upload":e.beforeUpload,accept:"image/*"},on:{change:e.uploadChange}},[e.avatar?r("img",{attrs:{src:e.avatar,alt:"image"}}):r("div",[r("a-icon",{attrs:{type:e.imgLoading?"loading":"plus"}}),e._v(" "),r("div",{staticClass:"ant-upload-text"},[e._v("\n              上传图片\n            ")])],1)])],1),e._v(" "),r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          英文名\n        ")]),e._v(" "),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["enName"],expression:"['enName']"}],attrs:{placeholder:"请输入英文名","allow-clear":""}})],1),e._v(" "),r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          中文名\n        ")]),e._v(" "),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cnName",{rules:[{required:!0,message:"中文名不能为空！"}]}],expression:"['cnName', {\n            rules: [\n              {\n                required: true,\n                message: '中文名不能为空！'\n              }\n            ]\n          }]"}],attrs:{placeholder:"请输入中文名","allow-clear":""}})],1),e._v(" "),r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          自我介绍\n        ")]),e._v(" "),r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["introduction",{rules:[{required:!0,message:"自我介绍不能为空！"}]}],expression:"['introduction', {\n            rules: [\n              {\n                required: true,\n                message: '自我介绍不能为空！'\n              }\n            ]\n          }]"}],attrs:{placeholder:"请输入自我介绍，换行符会保留",rows:3,autosize:{minRows:3,maxRows:8}}})],1),e._v(" "),r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          GitHub地址\n        ")]),e._v(" "),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["github",{rules:[{type:"url",message:"请输入合法的URL"}]}],expression:"['github', {\n            rules: [{\n              type: 'url',\n              message: '请输入合法的URL'\n            }]\n          }]"}],attrs:{placeholder:"请输入GitHub地址","allow-clear":""}})],1),e._v(" "),r("a-form-item",{attrs:{colon:!1}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          Email地址\n        ")]),e._v(" "),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{type:"email",message:"请输入合法的Email"}]}],expression:"['email', {\n            rules: [{\n              type: 'email',\n              message: '请输入合法的Email'\n            }]\n          }]"}],attrs:{placeholder:"请输入Email地址","allow-clear":""}})],1)],1),e._v(" "),r("a-button",{staticClass:"btn-save",attrs:{type:"primary"},on:{click:e.save}},[r("font-awesome-icon",{staticStyle:{"margin-right":"4px"},attrs:{icon:["far","save"]}}),e._v("保存设置\n    ")],1)],1)])}),[],!1,null,null,null);t.default=component.exports}}]);